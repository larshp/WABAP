<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>ide</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <link rel="stylesheet" href="../node_modules/codemirror/lib/codemirror.css">
    <link rel="stylesheet" href="../node_modules/codemirror/theme/seti.css">
    <link rel="stylesheet" href="../node_modules/codemirror/addon/dialog/dialog.css">
    <link rel="stylesheet" href="../node_modules/octicons/octicons/octicons.css">
    <script src="../node_modules/codemirror/lib/codemirror.js"></script>
    <script src="../node_modules/codemirror/addon/dialog/dialog.js"></script>
    <script src="../node_modules/codemirror/addon/search/searchcursor.js"></script>
    <script src="../node_modules/codemirror/addon/search/search.js"></script>
    <script src="../node_modules/codemirror-abap/build/abap.js"></script>
    <style type="text/css">
body {
    font-family: sans-serif;
    height: 100%;
    margin: 0;
    overflow: hidden;
}

@font-face {
    font-family: "Octicons Regular";
    src: url("../node_modules/octicons/octicons/octicons.ttf");
}

.list-item {
    text-decoration: none;
    display: block;
}
.list-item.expanded::before {
  font-family: "Octicons Regular";
  content: "\f0a3";
  width: 12px;
  display: inline-block;
  vertical-align: top;
  cursor: pointer;
}
.list-item.collapsed::before {
  font-family: "Octicons Regular";
  content: "\f078";
  width: 12px;
  display: inline-block;
  vertical-align: top;
  cursor: pointer;
}
.list-item.empty::before {
  display: inline-block;
  width: 12px;
  content: "";
}

.list-sub {
  padding-left: 18px;
}
.list-top {
  padding-left: 5px;
  margin-top: 5px;
}

.list-content {
  display: inline;
  cursor: default;
  -webkit-user-select: none;
}
.list-content.directory::before {
  font-family: "Octicons Regular";
  content: "\f016";
  width: 18px;
  display: inline-block;
  vertical-align: top;
}
.list-content.file::before {
  font-family: "Octicons Regular";
  content: "\f011";
  width: 18px;
  display: inline-block;
  vertical-align: top;
}

.wrap {
    width: 100%;
}

.floatleft {
    float: left;
    width: 20%;
    background-color: #353b45;
    height: calc(100vh - 20px);
    color: rgb(215, 218, 224);
}

.floatright {
    float: right;
    background-color: #000;
    height: calc(100vh - 20px);
    width: 80%;
}

.topmenu {
  background-color: #292E36;
  height: 20px;
  line-height: 20px;
  overflow: hidden;
  color: rgb(215, 218, 224);
}

.CodeMirror {
  height: calc(100vh - 20px);
  position: relative;
  overflow: hidden;
}

.menu-item {
    display: inline-block;
    cursor: default;
    -webkit-user-select: none;
}
.menu-item:hover {
    background-color: #353b45;
    font-weight: bold;
}
    </style>
  </head>
  <body>

<div class="wrap">
  <div class="topmenu"><i>ide</i> -
    <div class="menu-item">File</div>
    <div class="menu-item">About</div>
    <div class="menu-item">Rebuild menu</div>
  </div>
  <div class="floatleft">
  <ol class="list-top">
    <li class="list-item expanded">
      <div class="list-content directory">$TMP</div>
      <ol class="list-sub">
        <li class="list-item empty">
          <div class="list-content file">ZFOOBAR</div>
        </li>
        <li class="list-item empty">
          <div class="list-content file">ZASDF</div>
        </li>
        <li class="list-item expanded">
          <div class="list-content directory">Programs</div>
          <ol class="list-sub">
            <li class="list-item empty">
              <div class="list-content file">ZFOOBAR</div>
            </li>
            <li class="list-item empty">
              <div class="list-content file">ZASDF</div>
            </li>
          </ol>
        </li>
        <li class="list-item collapsed">
          <div class="list-content directory">Data Elements</div>
        </li>
        <li class="list-item collapsed">
          <div class="list-content directory">Domains</div>
        </li>
      </ol>
    </li>
  </ol>
  </div>
  <div class="floatright">
<form>
<textarea id="code" name="code">
* ABAP mode testing
WRITE 'Hello world'.
</textarea>
</form>
    </div>
<div style="clear: both;"></div>

<script>
  /* global CodeMirror */
  var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
    lineNumbers: true,
    matchBrackets: true,
    tabSize: 2,
    theme: "seti",
    mode: "abap"
  });

  function rebuildMenu() {
    var left = document.getElementsByClassName("floatleft")[0];
    left.innerHTML =
      "<ol class=\"list-top\">" +
      "  <li class=\"list-item expanded\">" +
      "    <div class=\"list-content directory\">$TMP</div>" +
      "    <ol class=\"list-sub\">" +
      "      <li class=\"list-item collapsed\">" +
      "        <div class=\"list-content directory\">Programs</div>" +
      "      </li>" +
      "      <li class=\"list-item collapsed\">" +
      "        <div class=\"list-content directory\">Data Elements</div>" +
      "      </li>" +
      "      <li class=\"list-item collapsed\">" +
      "        <div class=\"list-content directory\">Domains</div>" +
      "      </li>" +
      "    </ol>" +
      " </li>" +
      "</ol>";
  }

  function collapseMenu(target) {
    target.innerHTML = "\n" + target.children[0].outerHTML;
    target.classList.remove("expanded");
    target.classList.add("collapsed");
  }

  function expandMenu(target) {
    target.innerHTML = target.innerHTML +
      "<ol class=\"list-sub\">" +
      "  <li class=\"list-item empty\">" +
      "    <div class=\"list-content file\">ZFOOBAR</div>" +
      "  </li>" +
      "</ol>";
    target.classList.remove("collapsed");
    target.classList.add("expanded");
  }

  document.onclick = function(e) {
    if(e.target.className === "list-item expanded") {
      collapseMenu(e.target);
    } else if(e.target.className === "list-item collapsed") {
      expandMenu(e.target);
    } else if(e.target.className === "list-content directory") {
      alert("todo, click directory");
    } else if(e.target.className === "list-content file") {
      alert("todo, click file");
    } else if(e.target.className === "menu-item") {
      switch(e.target.innerText) {
        case "Rebuild menu":
          rebuildMenu();
          break;
        default:
          alert("todo, click menu item");
      }
    }
  }
</script>
  </body>
</html>